#!/usr/bin/env node

/**
 * Module dependencies.
 */

var cluster, http, i, logger, numCPUs;

cluster = require("cluster");
logger = require("../common/logger");

if (cluster.isMaster) {
    i = 0;
    while (i < 1) {
        cluster.fork();
        i++;
    }
    cluster.on("exit", function(worker, code, signal) {
        logger.error("worker " + worker.process.pid + " died");
        return cluster.fork();
    });
} else {
    require("../index");
}
